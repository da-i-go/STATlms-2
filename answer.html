<!DOCTYPE html>
<html lang="ja">
<head>
  <meta name="robots" content="noindex, nofollow">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>診断結果</title>
  <link rel="stylesheet" href="css/answer.css" />
</head>
<body>
  <h1>診断結果</h1>

  <section class="result-section">
    <h2>■ 診断名</h2>
    <p>例）脳出血</p>
  </section>

  <section class="result-section">
    <h2>■ Key画像</h2>
    <div class="carousel-container">
      <div class="carousel-wrapper">
        <button class="carousel-button prev">&#10094;</button>
        <div class="carousel-track-container">
          <ul class="carousel-track">
            <li class="carousel-slide">
              <img src="Key-images/key-cor.png" alt="穿孔部位">
              <!--<p class="caption">キャプション加える場所</p>-->
            </li>
            <li class="carousel-slide">
              <img src="Key-images/key-cor-axi.png" alt="腸管外ガス">
              <!--<p class="caption">キャプション加える場所</p>-->
            </li>
          </ul>
        </div>
        <button class="carousel-button next">&#10095;</button>
      </div>
      <div class="carousel-indicators"></div>
    </div>
  </section>

  <section class="result-section">
    <h2>■ 解説</h2>
    <div class="explanation">
      <p>この患者では、頭部CTの〇〇スライスにて高吸収域が観察され、急性の出血が示唆されます。</p>
      <p>背景に高血圧の既往があることから、○○性脳出血が疑われます。</p>
    </div>
  </section>

  <div class="back-button">
    <a href="https://anjokosei.jp">次へ</a>
  </div>

  <script>
    const track = document.querySelector('.carousel-track');
    const slides = Array.from(track.children);
    const nextButton = document.querySelector('.carousel-button.next');
    const prevButton = document.querySelector('.carousel-button.prev');
    const indicatorsContainer = document.querySelector('.carousel-indicators');
slides.forEach((_, index) => {
  const dot = document.createElement('span');
  dot.classList.add('indicator');
  if (index === 0) dot.classList.add('active');
  dot.addEventListener('click', () => {
    currentIndex = index;
    updateSlidePosition();
  });
  indicatorsContainer.appendChild(dot);
});
const indicators = indicatorsContainer.querySelectorAll('.indicator');
    let currentIndex = 0;

    function updateSlidePosition() {
      const slideWidth = slides[0].getBoundingClientRect().width;
      track.style.transform = 'translateX(-' + slideWidth * currentIndex + 'px)';
      indicators.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentIndex);
      });
    }

    nextButton.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % slides.length;
      updateSlidePosition();
    });

    prevButton.addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + slides.length) % slides.length;
      updateSlidePosition();
    });

    indicators.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        currentIndex = index;
        updateSlidePosition();
      });
    });

    // フリック対応
    let startX = 0;
    track.addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
    });

    track.addEventListener('touchend', (e) => {
      const endX = e.changedTouches[0].clientX;
      const diff = endX - startX;
      if (diff > 50) {
        currentIndex = (currentIndex - 1 + slides.length) % slides.length;
        updateSlidePosition();
      } else if (diff < -50) {
        currentIndex = (currentIndex + 1) % slides.length;
        updateSlidePosition();
      }
    });

    window.addEventListener('load', updateSlidePosition);
    window.addEventListener('resize', updateSlidePosition);
  </script>
</body>
</html>
